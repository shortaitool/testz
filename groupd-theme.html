<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no" />
<title>‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ó‡•ç‡§∞‡•Å‡§™ ‡§°‡•Ä</title>
<style>
  :root{
    --bg:#0b1020; --panel:#131a33; --muted:#273153; --text:#eaf2ff;
    --cyan:#22d3ee; --blue:#3b82f6; --violet:#8b5cf6; --pink:#ec4899; --amber:#f59e0b;
    --green:#22c55e; --red:#ef4444; --sky:#38bdf8;
    --glow:0 0 25px rgba(56,189,248,.35), 0 0 60px rgba(139,92,246,.25);
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
  body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background: radial-gradient(1200px 800px at 10% -10%, #111b3f 0%, #0b1020 45%, #060913 100%); color:var(--text); touch-action:manipulation; overscroll-behavior:none;}
  .container{max-width:1000px; margin:0 auto; padding:14px 14px 96px;}
  header{background:linear-gradient(120deg, #1f2a4d, #151f3f 55%, #1b1f3a); border:1px solid #21305f; color:#eaf2ff; border-radius:16px; padding:16px; box-shadow: var(--glow); text-align:center; margin:10px 0 16px;}
  .title{font-size:1.45rem; font-weight:900; letter-spacing:.5px; text-transform:uppercase}
  .title small{display:block; font-size:.85rem; opacity:.8; margin-top:4px;}
  .stats{display:flex; gap:10px; justify-content:space-between; margin-top:12px; flex-wrap:wrap}
  .chip{flex:1; min-width:100px; display:flex; align-items:center; justify-content:center; gap:8px; padding:10px 12px; border-radius:999px; font-weight:800; letter-spacing:.3px; border:1px solid #2a376a; background:linear-gradient(180deg,#1b2547,#151d3a); box-shadow:inset 0 -2px 6px rgba(255,255,255,.04);}
  .chip .dot{width:10px;height:10px;border-radius:50%;}
  .chip.green .dot{background:var(--green)}
  .chip.red .dot{background:var(--red)}
  .chip.cyan .dot{background:var(--sky)}
  .chip span.value{padding:.2rem .6rem; border-radius:10px; background:#0d1633; border:1px solid #27335f;}
  .chip.timer{transition:filter .25s ease}
  .chip.timer.warning{filter: drop-shadow(0 0 10px rgba(239,68,68,.7)); animation:pulse 1s infinite}
  @keyframes pulse{50%{opacity:.6}}

  /* Question numbers */
  .q-nav{overflow-x:auto; white-space:nowrap; -webkit-overflow-scrolling:touch; background:linear-gradient(180deg,#0e1633,#0b1127); border:1px solid #223160; border-radius:12px; padding:8px; margin:12px 0 16px;}
  .q-badge{display:inline-flex; align-items:center; justify-content:center; width:38px; height:38px; margin:0 6px; border-radius:50%; font-weight:900; cursor:pointer; color:#bcd3ff; background:#1a2550; border:1px solid #2a3a79; transition:transform .12s ease, box-shadow .12s ease}
  .q-badge.current{outline:2px solid var(--sky); box-shadow:0 0 0 3px rgba(56,189,248,.2)}
  .q-badge.attended{background:linear-gradient(180deg,#155e39,#0f3f27); color:#eafff3; border-color:#1e7d4e}
  .q-badge.skipped{background:linear-gradient(180deg,#6b111b,#410a11); color:#ffe5e5; border-color:#7e1825}
  .q-badge:active{transform:scale(.92)}

  /* Question box */
  .card{background:linear-gradient(180deg,#111936,#0e1530); border:1px solid #243164; border-radius:16px; box-shadow:var(--glow); padding:16px; max-height:calc(100vh - 330px); overflow:auto}
  .q-text{font-size:1.08rem; font-weight:800; margin-bottom:10px}
  .opt{background:#17224a; border:1px solid #2a3a79; color:#dfe7ff; padding:12px; border-radius:12px; margin:10px 0; cursor:pointer; transition:background .12s ease, transform .05s ease, border-color .12s ease}
  .opt:hover{background:#1b2856}
  .opt.selected{background:linear-gradient(180deg,#1e3a8a,#1b2560); border-color:#3b82f6; box-shadow:0 0 0 2px rgba(59,130,246,.25) inset}
  .opt:active{transform:scale(.98)}

  /* Bottom nav */
  .dock{position:fixed; left:0; right:0; bottom:0; padding:10px; display:flex; gap:10px; background:linear-gradient(to top, #05070f 0%, rgba(5,7,15,.6) 100%); border-top:1px solid #1b2750; backdrop-filter: blur(6px);}
  .btn{flex:1; font-weight:900; letter-spacing:.3px; padding:14px 12px; border-radius:12px; border:1px solid #2b386d; color:#eaf2ff; background:linear-gradient(180deg,#182356,#121a3e); box-shadow:inset 0 -2px 0 rgba(255,255,255,.06); cursor:pointer; transition:transform .06s ease, box-shadow .18s ease, border-color .18s ease}
  .btn:active{transform:translateY(1px)}
  .btn.prev{outline:2px solid transparent}
  .btn.next{border-color:#2550b6; background:linear-gradient(180deg,#1843a6,#0f2e79)}
  .btn.submit{border-color:#1e7d4e; background:linear-gradient(180deg,#15633a,#0f3f27)}
  .btn:hover{box-shadow:0 0 18px rgba(59,130,246,.25)}

  /* Dashboard */
  .dash{display:none; position:fixed; inset:0; z-index:50; overflow:auto; padding:16px; background:
        radial-gradient(800px 600px at 90% -10%, rgba(88,28,135,.18), transparent 60%),
        radial-gradient(700px 500px at 10% 110%, rgba(14,165,233,.16), transparent 60%),
        linear-gradient(180deg,#0b1020 0%, #060913 100%);}
  .dash h2{margin:0 0 10px; font-size:1.25rem}
  .kpis{display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:12px; margin:12px 0}
  .kpi{padding:14px; border-radius:14px; color:#001015; font-weight:900; letter-spacing:.3px; border:1px solid #0003; box-shadow:0 6px 18px rgba(0,0,0,.28)}
  .kpi span{display:block; font-size:1.35rem; margin-top:6px; color:#001}
  .kpi.total{background:linear-gradient(135deg,#a5f3fc,#38bdf8)}
  .kpi.att{background:linear-gradient(135deg,#bbf7d0,#22c55e)}
  .kpi.skp{background:linear-gradient(135deg,#fecaca,#ef4444)}
  .kpi.cor{background:linear-gradient(135deg,#86efac,#16a34a)}
  .kpi.wrg{background:linear-gradient(135deg,#fca5a5,#ef4444)}
  .kpi.acc{background:linear-gradient(135deg,#e9d5ff,#8b5cf6)}
  .kpi.scr{background:linear-gradient(135deg,#fde68a,#f59e0b)}
  .kpi.tim{background:linear-gradient(135deg,#bfdbfe,#3b82f6)}
  .section{background:linear-gradient(180deg,#0e1530,#0b1127); border:1px solid #223160; border-radius:14px; padding:12px; margin:14px 0; box-shadow:var(--glow)}
  .result-item{background:#121a3b; border:1px solid #253573; padding:10px; border-radius:10px; margin:10px 0}
  .correct{color:#22c55e; font-weight:800}
  .incorrect{color:#ef4444; font-weight:800}
  .actions{display:flex; gap:10px; margin:14px 0}
  .btn.action{flex:1}
  .btn.refresh{border-color:#2550b6; background:linear-gradient(180deg,#1843a6,#0f2e79)}
  .btn.history{border-color:#a16207; background:linear-gradient(180deg,#b7791f,#92400e)}
  /* History Modal */
  .modal{display:none; position:fixed; inset:0; z-index:60; background:#070b16f0; backdrop-filter: blur(6px); padding:14px; overflow:auto}
  .modal h3{margin:0 0 10px}
  .chart{background:#0f1836; border:1px solid #243165; border-radius:12px; padding:10px; box-shadow:var(--glow); margin:10px 0}
  .table{background:#0f1836; border:1px solid #243165; border-radius:12px; overflow:hidden}
  .row{display:grid; grid-template-columns: 90px 1fr 1fr 1fr 1fr 1fr; gap:8px; padding:10px; border-bottom:1px solid #1d2a57; font-size:.92rem}
  .row.head{background:#101c44; font-weight:900}
  .tag{display:inline-block; padding:.1rem .5rem; border-radius:8px; border:1px solid #244; background:#0a1330; color:#c8daff}
  /* Small screens */
  @media (max-width:480px){
    .row{grid-template-columns: 70px 1fr 1fr 1fr 1fr 1fr}
  }
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title">‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ó‡•ç‡§∞‡•Å‡§™ ‡§°‡•Ä <small>Mock Test (25 ‡§™‡•ç‡§∞‡§∂‡•ç‡§®)</small></div>
      <div class="stats">
        <div class="chip green"><span class="dot"></span> ‡§Ö‡§ü‡•á‡§Ç‡§°: <span class="value" id="attended">0</span></div>
        <div class="chip red"><span class="dot"></span> ‡§õ‡•ã‡§°‡§º‡•á: <span class="value" id="skipped">25</span></div>
        <div class="chip cyan timer" id="timerChip"><span class="dot"></span> ‡§ü‡§æ‡§á‡§Æ‡§∞: <span class="value" id="timer">30:00</span></div>
      </div>
    </header>

    <div class="q-nav" id="qNav"></div>

    <div class="card">
      <div class="q-text" id="qText">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‚Ä¶</div>
      <div id="opts"></div>
    </div>
  </div>

  <!-- Bottom Dock -->
  <div class="dock">
    <button class="btn prev" id="prevBtn">‚óÄ ‡§™‡§ø‡§õ‡§≤‡§æ</button>
    <button class="btn next" id="nextBtn">‡§Ö‡§ó‡§≤‡§æ ‚ñ∂</button>
    <button class="btn submit" id="submitBtn">‚úÖ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ü‡•á‡§∏‡•ç‡§ü</button>
  </div>

  <!-- Dashboard -->
  <div class="dash" id="dash">
    <h2>üìä ‡§Ü‡§™‡§ï‡§æ ‡§ü‡•á‡§∏‡•ç‡§ü ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h2>
    <div class="kpis">
      <div class="kpi total">‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®<span id="kpiTotal">25</span></div>
      <div class="kpi att">‡§Ö‡§ü‡•á‡§Ç‡§°<span id="kpiAtt">0</span></div>
      <div class="kpi skp">‡§∏‡•ç‡§ï‡§ø‡§™<span id="kpiSkp">0</span></div>
      <div class="kpi cor">‡§∏‡§π‡•Ä<span id="kpiCor">0</span></div>
      <div class="kpi wrg">‡§ó‡§≤‡§§<span id="kpiWrg">0</span></div>
      <div class="kpi acc">Accuracy<span id="kpiAcc">0%</span></div>
      <div class="kpi scr">Score<span id="kpiScr">0</span></div>
      <div class="kpi tim">‡§∏‡§Æ‡§Ø (‡§Æ‡§ø:‡§∏‡•á)<span id="kpiTime">0:00</span></div>
    </div>

    <div class="section">
      <h3>üßæ ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§â‡§§‡•ç‡§§‡§∞</h3>
      <div id="detail"></div>
    </div>

    <div class="actions">
      <button class="btn action refresh" onclick="location.reload()">üîÑ ‡§®‡§Ø‡§æ ‡§ü‡•á‡§∏‡•ç‡§ü</button>
      <button class="btn action history" onclick="openHistory()">üìú ‡§ü‡•á‡§∏‡•ç‡§ü ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä</button>
    </div>
  </div>

  <!-- History Modal -->
  <div class="modal" id="history">
    <h3>üìú ‡§ü‡•á‡§∏‡•ç‡§ü ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä (Attempts)</h3>
    <div class="chart">
      <canvas id="lineChart" width="800" height="260"></canvas>
    </div>
    <div class="chart">
      <canvas id="barChart" width="800" height="260"></canvas>
    </div>
    <div class="table" id="histTable"></div>
    <div class="actions" style="margin-top:12px">
      <button class="btn action refresh" onclick="document.getElementById('history').style.display='none'">‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
      <button class="btn action history" onclick="clearHistory()">üßπ ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç</button>
    </div>
  </div>

<script>
(() => {
  // ====== DATA: 25 Fixed Questions (as requested) ======
  const questions = [
    {id:1,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",options:["‡§ú‡§Ø‡§™‡•Å‡§∞","‡§ú‡•ã‡§ß‡§™‡•Å‡§∞","‡§â‡§¶‡§Ø‡§™‡•Å‡§∞","‡§¨‡•Ä‡§ï‡§æ‡§®‡•á‡§∞"],correctAnswer:0},
    {id:2,text:"‡§•‡§æ‡§∞ ‡§Æ‡§∞‡•Å‡§∏‡•ç‡§•‡§≤ ‡§ï‡§ø‡§∏ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§ø‡§§ ‡§π‡•à?",options:["‡§ó‡•Å‡§ú‡§∞‡§æ‡§§","‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§®","‡§Æ‡§ß‡•ç‡§Ø ‡§™‡•ç‡§∞‡§¶‡•á‡§∂","‡§π‡§∞‡§ø‡§Ø‡§æ‡§£‡§æ"],correctAnswer:1},
    {id:3,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§™‡§ï‡•ç‡§∑‡•Ä ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§Æ‡•ã‡§∞","‡§ó‡•ã‡§°‡§æ‡§µ‡§£","‡§§‡•ã‡§§‡§æ","‡§ï‡§¨‡•Ç‡§§‡§∞"],correctAnswer:1},
    {id:4,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§™‡§∂‡•Å ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§¨‡§æ‡§ò","‡§ö‡§ø‡§Ç‡§ï‡§æ‡§∞‡§æ","‡§ä‡§Ç‡§ü","‡§π‡§ø‡§∞‡§£"],correctAnswer:2},
    {id:5,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§ú‡§ø‡§≤‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§ú‡•à‡§∏‡§≤‡§Æ‡•á‡§∞","‡§¨‡•Ä‡§ï‡§æ‡§®‡•á‡§∞","‡§ú‡•ã‡§ß‡§™‡•Å‡§∞","‡§â‡§¶‡§Ø‡§™‡•Å‡§∞"],correctAnswer:0},
    {id:6,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ ‡§ï‡§¨ ‡§π‡•Å‡§à ‡§•‡•Ä?",options:["15 ‡§Ö‡§ó‡§∏‡•ç‡§§ 1947","26 ‡§ú‡§®‡§µ‡§∞‡•Ä 1950","30 ‡§Æ‡§æ‡§∞‡•ç‡§ö 1949","1 ‡§®‡§µ‡§Ç‡§¨‡§∞ 1956"],correctAnswer:2},
    {id:7,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§ï‡§æ ‡§ï‡§ø‡§§‡§®‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§π‡•à?",options:["5.8%","8.4%","10.2%","12.5%"],correctAnswer:2},
    {id:8,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§≤ ‡§ï‡§ø‡§§‡§®‡•á ‡§ú‡§ø‡§≤‡•á ‡§π‡•à‡§Ç?",options:["30","33","50","25"],correctAnswer:1},
    {id:9,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§≠‡§æ‡§∑‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",options:["‡§π‡§ø‡§Ç‡§¶‡•Ä","‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§®‡•Ä","‡§Æ‡§æ‡§∞‡§µ‡§æ‡§°‡§º‡•Ä","‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä"],correctAnswer:0},
    {id:10,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§ä‡§Å‡§ö‡§æ ‡§™‡§∞‡•ç‡§µ‡§§ ‡§∂‡§ø‡§ñ‡§∞ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§Ü‡§¨‡•Ç ‡§™‡§∞‡•ç‡§µ‡§§","‡§∏‡§∞‡§ø‡§∏‡•ç‡§ï‡§æ ‡§™‡§∞‡•ç‡§µ‡§§","‡§ó‡•Å‡§∞‡•Å ‡§∂‡§ø‡§ñ‡§∞","‡§§‡§æ‡§∞‡§æ‡§ó‡§¢‡§º"],correctAnswer:2},
    {id:11,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡§∞‡•ç‡§∑‡§æ ‡§µ‡§æ‡§≤‡§æ ‡§ú‡§ø‡§≤‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§ú‡§Ø‡§™‡•Å‡§∞","‡§â‡§¶‡§Ø‡§™‡•Å‡§∞","‡§ù‡§æ‡§≤‡§æ‡§µ‡§æ‡§°‡§º","‡§ï‡•ã‡§ü‡§æ"],correctAnswer:2},
    {id:12,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§≤‡§Ç‡§¨‡§æ ‡§®‡§π‡§∞ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§á‡§Ç‡§¶‡§ø‡§∞‡§æ ‡§ó‡§æ‡§Ç‡§ß‡•Ä ‡§®‡§π‡§∞","‡§ó‡§Ç‡§ó ‡§®‡§π‡§∞","‡§≠‡§æ‡§ñ‡§°‡§º‡§æ ‡§®‡§π‡§∞","‡§ö‡§Ç‡§¨‡§≤ ‡§®‡§π‡§∞"],correctAnswer:0},
    {id:13,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡•Ä ‡§Æ‡•Ä‡§†‡•á ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§ù‡•Ä‡§≤ ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§π‡•à?",options:["‡§ú‡§Ø‡§∏‡§Æ‡§Ç‡§¶ ‡§ù‡•Ä‡§≤","‡§™‡§ø‡§õ‡•ã‡§≤‡§æ ‡§ù‡•Ä‡§≤","‡§´‡§§‡•á‡§π‡§∏‡§æ‡§ó‡§∞ ‡§ù‡•Ä‡§≤","‡§Ü‡§®‡§æ‡§∏‡§æ‡§ó‡§∞ ‡§ù‡•Ä‡§≤"],correctAnswer:0},
    {id:14,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§≤ ‡§ï‡§ø‡§§‡§®‡•á ‡§≤‡•ã‡§ï‡§∏‡§≠‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§π‡•à‡§Ç?",options:["20","25","30","35"],correctAnswer:1},
    {id:15,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§≤ ‡§ï‡§ø‡§§‡§®‡•á ‡§∞‡§æ‡§ú‡•ç‡§Ø‡§∏‡§≠‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§π‡•à‡§Ç?",options:["8","10","12","15"],correctAnswer:1},
    {id:16,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§™‡•ç‡§∞‡§•‡§Æ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ï‡•å‡§® ‡§•‡§æ?",options:["‡§ú‡§Ø‡§®‡§æ‡§∞‡§æ‡§Ø‡§£ ‡§µ‡•ç‡§Ø‡§æ‡§∏","‡§Æ‡•ã‡§π‡§®‡§≤‡§æ‡§≤ ‡§∏‡•Å‡§ñ‡§æ‡§°‡§º‡§ø‡§Ø‡§æ","‡§π‡•Ä‡§∞‡§æ‡§≤‡§æ‡§≤ ‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä","‡§¨‡§∞‡§ï‡§§‡•Å‡§≤‡•ç‡§≤‡§æ‡§π ‡§ñ‡§æ‡§®"],correctAnswer:2},
    {id:17,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§®‡•É‡§§‡•ç‡§Ø ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§ï‡§†‡§™‡•Å‡§§‡§≤‡•Ä","‡§ò‡•Ç‡§Æ‡§∞","‡§ï‡§æ‡§≤‡§¨‡•á‡§≤‡§ø‡§Ø‡§æ","‡§ó‡•à‡§∞"],correctAnswer:1},
    {id:18,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§¨‡§æ‡§Ç‡§ß ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§Æ‡§æ‡§π‡•Ä ‡§¨‡§ú‡§æ‡§ú ‡§∏‡§æ‡§ó‡§∞ ‡§¨‡§æ‡§Ç‡§ß","‡§ú‡§µ‡§æ‡§à ‡§¨‡§æ‡§Ç‡§ß","‡§¨‡•Ä‡§∏‡§≤‡§™‡•Å‡§∞ ‡§¨‡§æ‡§Ç‡§ß","‡§∞‡§æ‡§£‡§æ ‡§™‡•ç‡§∞‡§§‡§æ‡§™ ‡§∏‡§æ‡§ó‡§∞ ‡§¨‡§æ‡§Ç‡§ß"],correctAnswer:3},
    {id:19,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§µ‡§æ‡§≤‡§æ ‡§ú‡§ø‡§≤‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§ú‡§Ø‡§™‡•Å‡§∞","‡§ú‡•ã‡§ß‡§™‡•Å‡§∞","‡§ï‡•ã‡§ü‡§æ","‡§Ö‡§ú‡§Æ‡•á‡§∞"],correctAnswer:0},
    {id:20,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§ï‡§Æ ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§µ‡§æ‡§≤‡§æ ‡§ú‡§ø‡§≤‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§ú‡•à‡§∏‡§≤‡§Æ‡•á‡§∞","‡§¨‡§æ‡§°‡§º‡§Æ‡•á‡§∞","‡§∏‡§ø‡§∞‡•ã‡§π‡•Ä","‡§™‡•ç‡§∞‡§§‡§æ‡§™‡§ó‡§¢‡§º"],correctAnswer:0},
    {id:21,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§∞‡•á‡§ó‡§ø‡§∏‡•ç‡§§‡§æ‡§® ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§•‡§æ‡§∞","‡§ó‡•ã‡§¨‡•Ä","‡§∏‡§π‡§æ‡§∞‡§æ","‡§ï‡§æ‡§≤‡§æ‡§π‡§æ‡§∞‡•Ä"],correctAnswer:0},
    {id:22,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§µ‡§®‡•ç‡§Ø‡§ú‡•Ä‡§µ ‡§Ö‡§≠‡§Ø‡§æ‡§∞‡§£‡•ç‡§Ø ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§∞‡§£‡§•‡§Ç‡§≠‡•å‡§∞","‡§∏‡§∞‡§ø‡§∏‡•ç‡§ï‡§æ","‡§ï‡•á‡§µ‡§≤‡§æ‡§¶‡•á‡§µ","‡§¶‡•á‡§∂‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§â‡§¶‡•ç‡§Ø‡§æ‡§®"],correctAnswer:3},
    {id:23,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§∞‡•á‡§≤‡§µ‡•á ‡§ú‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§ú‡§Ø‡§™‡•Å‡§∞","‡§ú‡•ã‡§ß‡§™‡•Å‡§∞","‡§Ö‡§ú‡§Æ‡•á‡§∞","‡§≠‡§∞‡§§‡§™‡•Å‡§∞"],correctAnswer:1},
    {id:24,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§π‡§µ‡§æ‡§à ‡§Ö‡§°‡•ç‡§°‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§ú‡§Ø‡§™‡•Å‡§∞","‡§ú‡•ã‡§ß‡§™‡•Å‡§∞","‡§â‡§¶‡§Ø‡§™‡•Å‡§∞","‡§ï‡•ã‡§ü‡§æ"],correctAnswer:0},
    {id:25,text:"‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§µ‡§æ‡§≤‡§æ ‡§ú‡§ø‡§≤‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?",options:["‡§ú‡§Ø‡§™‡•Å‡§∞","‡§ï‡•ã‡§ü‡§æ","‡§Ö‡§ú‡§Æ‡•á‡§∞","‡§â‡§¶‡§Ø‡§™‡•Å‡§∞"],correctAnswer:1}
  ];

  // ====== STATE ======
  let idx = 0;
  const answers = new Array(questions.length).fill(null);
  let attended = 0;
  let skipped  = questions.length;
  let timeLeft = 30 * 60; // seconds
  let timerId;

  // ====== DOM ======
  const qNav   = document.getElementById('qNav');
  const qText  = document.getElementById('qText');
  const opts   = document.getElementById('opts');
  const attEl  = document.getElementById('attended');
  const skpEl  = document.getElementById('skipped');
  const timEl  = document.getElementById('timer');
  const timerChip = document.getElementById('timerChip');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const submitBtn = document.getElementById('submitBtn');
  const dash = document.getElementById('dash');

  // ====== RENDER ======
  function renderNav(){
    qNav.innerHTML = '';
    questions.forEach((q,i)=>{
      const b = document.createElement('button');
      b.className = 'q-badge';
      if(i===idx) b.classList.add('current');
      if(answers[i]!==null) b.classList.add('attended'); else b.classList.add('skipped');
      b.textContent = i+1;
      b.onclick = ()=>{ idx=i; renderQ(); };
      qNav.appendChild(b);
    });
  }

  function renderQ(){
    renderNav();
    const q = questions[idx];
    qText.textContent = `${idx+1}. ${q.text}`;
    opts.innerHTML = '';
    q.options.forEach((op, oi)=>{
      const el = document.createElement('div');
      el.className = 'opt' + (answers[idx]===oi?' selected':'');
      el.textContent = op;
      el.onclick = ()=>{ answers[idx]=oi; recalc(); renderQ(); };
      opts.appendChild(el);
    });
    prevBtn.disabled = idx===0;
    nextBtn.disabled = idx===questions.length-1;
  }

  function recalc(){
    attended = answers.filter(a=>a!==null).length;
    skipped  = questions.length - attended;
    attEl.textContent = attended;
    skpEl.textContent = skipped;
  }

  function startTimer(){
    clearInterval(timerId);
    timerId = setInterval(()=>{
      timeLeft--;
      if(timeLeft<=0){ clearInterval(timerId); submit(); return; }
      const m = String(Math.floor(timeLeft/60)).padStart(2,'0');
      const s = String(timeLeft%60).padStart(2,'0');
      timEl.textContent = `${m}:${s}`;
      if(timeLeft<=300) timerChip.classList.add('warning');
    },1000);
  }

  // ====== CONTROLS ======
  prevBtn.onclick = ()=>{ if(idx>0){ idx--; renderQ(); } };
  nextBtn.onclick = ()=>{ if(idx<questions.length-1){ idx++; renderQ(); } };
  submitBtn.onclick = ()=>{ if(confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§ü‡•á‡§∏‡•ç‡§ü ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?')) submit(); };

  // ====== SCORING & DASH ======
  function submit(){
    clearInterval(timerId);
    // Count
    let correct=0, wrong=0;
    answers.forEach((a,i)=>{
      if(a===null) return;
      if(a===questions[i].correctAnswer) correct++; else wrong++;
    });
    const score = correct*4 - wrong*1;
    const acc   = Math.round((correct/Math.max(1,(correct+wrong)))*100);
    const used  = (30*60)-timeLeft;
    const usedStr = `${Math.floor(used/60)}:${String(used%60).padStart(2,'0')}`;

    // KPIs
    setText('kpiTotal', questions.length);
    setText('kpiAtt', attended);
    setText('kpiSkp', skipped);
    setText('kpiCor', correct);
    setText('kpiWrg', wrong);
    setText('kpiAcc', acc + '%');
    setText('kpiScr', score);
    setText('kpiTime', usedStr);

    // Details
    const detail = document.getElementById('detail');
    detail.innerHTML = '';
    questions.forEach((q,i)=>{
      const box = document.createElement('div');
      box.className = 'result-item';
      const ua = answers[i];
      const isCorrect = ua!==null && ua===q.correctAnswer;
      box.innerHTML = `
        <div style="font-weight:800;margin-bottom:6px">${i+1}. ${q.text}</div>
        <div class="${ua===null?'incorrect':(isCorrect?'correct':'incorrect')}">
          ‡§Ü‡§™‡§ï‡§æ ‡§â‡§§‡•ç‡§§‡§∞: ${ua===null?'<span class="tag">‡§®‡§π‡•Ä‡§Ç ‡§¶‡§ø‡§Ø‡§æ</span>':q.options[ua]}
        </div>
        <div class="correct">‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞: ${q.options[q.correctAnswer]}</div>
      `;
      detail.appendChild(box);
    });

    // Save history
    const rec = {
      date: new Date().toLocaleString(),
      total: questions.length, attended, skipped,
      correct, wrong, score, accuracy: acc, time: usedStr
    };
    const key = 'testHistoryRGD';
    const hist = JSON.parse(localStorage.getItem(key) || '[]');
    hist.push(rec);
    localStorage.setItem(key, JSON.stringify(hist));

    dash.style.display='block';
  }

  function setText(id, val){ document.getElementById(id).textContent = val; }

  // ====== HISTORY ======
  function openHistory(){
    const modal = document.getElementById('history');
    modal.style.display='block';
    const key = 'testHistoryRGD';
    const hist = JSON.parse(localStorage.getItem(key)||'[]');

    // Table
    const tbl = document.getElementById('histTable');
    tbl.innerHTML = '';
    const head = rowEl(['Attempt','#Score','Accuracy','Correct','Wrong','Skipped'], true);
    tbl.appendChild(head);
    hist.forEach((h,i)=>{
      const r = rowEl([String(i+1)+' ['+h.date.split(',')[0]+']', String(h.score), h.accuracy+'%', String(h.correct), String(h.wrong), String(h.skipped)]);
      tbl.appendChild(r);
    });

    // Charts
    drawLineChart(hist);
    drawBarChart(hist);
  }

  function rowEl(values, header=false){
    const r = document.createElement('div'); r.className = 'row'+(header?' head':'');
    values.forEach(v=>{ const c=document.createElement('div'); c.textContent = v; r.appendChild(c); });
    return r;
  }

  function clearHistory(){
    if(confirm('‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§°‡§ø‡§≤‡•Ä‡§ü ‡§ï‡§∞‡•á‡§Ç?')){ localStorage.removeItem('testHistoryRGD'); openHistory(); }
  }

  // Canvas utilities
  function drawAxis(ctx, x, y, w, h){
    ctx.strokeStyle = '#3851a8';
    ctx.lineWidth=1;
    ctx.beginPath(); // X
    ctx.moveTo(x, y+h); ctx.lineTo(x+w, y+h);
    ctx.stroke();
    ctx.beginPath(); // Y
    ctx.moveTo(x, y); ctx.lineTo(x, y+h);
    ctx.stroke();
  }

  function drawLineChart(hist){
    const cv = document.getElementById('lineChart');
    const ctx = cv.getContext('2d');
    ctx.clearRect(0,0,cv.width,cv.height);

    const P = {l:42, r:12, t:14, b:26};
    const W = cv.width - P.l - P.r;
    const H = cv.height - P.t - P.b;

    drawAxis(ctx, P.l, P.t, W, H);

    // Labels
    ctx.fillStyle='#9fb4ff'; ctx.font='12px system-ui';
    ctx.fillText('Score', 6, P.t+10);
    ctx.fillText('Attempts ‚Üí', P.l+W-90, P.t+H+20);

    if(hist.length===0){
      ctx.fillText('No history', P.l+10, P.t+20);
      return;
    }

    // Scale (score can be negative). Estimate min/max
    const vals = hist.map(h=>h.score);
    const vmin = Math.min(0, Math.min(...vals));
    const vmax = Math.max(questions.length*4, Math.max(...vals));
    const xStep = hist.length>1 ? W/(hist.length-1) : 0;

    // Grid
    ctx.strokeStyle='rgba(88,123,255,.18)';
    ctx.lineWidth=1;
    ctx.setLineDash([4,4]);
    for(let gy=0; gy<=4; gy++){
      const y = P.t + H - (gy/4)*H;
      ctx.beginPath(); ctx.moveTo(P.l, y); ctx.lineTo(P.l+W, y); ctx.stroke();
      const val = Math.round(vmin + (gy/4)*(vmax-vmin));
      ctx.fillStyle='#88a2ff'; ctx.fillText(val, 8, y+4);
    }
    ctx.setLineDash([]);

    // Line
    ctx.strokeStyle='#38bdf8'; ctx.lineWidth=2;
    ctx.beginPath();
    hist.forEach((h,i)=>{
      const x = P.l + (xStep*i);
      const y = P.t + H - ((h.score - vmin)/(vmax-vmin||1))*H;
      if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    });
    ctx.stroke();

    // Points + tooltip value on tap
    hist.forEach((h,i)=>{
      const x = P.l + (xStep*i);
      const y = P.t + H - ((h.score - vmin)/(vmax-vmin||1))*H;
      ctx.fillStyle='#22d3ee';
      ctx.beginPath(); ctx.arc(x,y,4,0,Math.PI*2); ctx.fill();
    });

    // Simple tap tooltip
    cv.onclick = (e)=>{
      const rect = cv.getBoundingClientRect();
      const mx = e.clientX - rect.left, my = e.clientY - rect.top;
      // find nearest point
      let best=-1, bd=1e9;
      hist.forEach((h,i)=>{
        const x = P.l + (xStep*i);
        const y = P.t + H - ((h.score - vmin)/(vmax-vmin||1))*H;
        const d = Math.hypot(mx-x,my-y);
        if(d<bd){ bd=d; best=i; }
      });
      if(bd<14){
        const h = hist[best];
        // draw bubble
        ctx.clearRect(0,0,cv.width,30); // top band
        ctx.fillStyle='#0f1836';
        ctx.fillRect(0,0,cv.width,30);
        ctx.fillStyle='#a7c1ff';
        ctx.font='12px system-ui';
        ctx.fillText(`Attempt ${best+1} | Score: ${h.score}`, 12, 20);
      }
    };
  }

  function drawBarChart(hist){
    const cv = document.getElementById('barChart');
    const ctx = cv.getContext('2d');
    ctx.clearRect(0,0,cv.width,cv.height);

    const P = {l:42, r:12, t:14, b:26};
    const W = cv.width - P.l - P.r;
    const H = cv.height - P.t - P.b;

    drawAxis(ctx, P.l, P.t, W, H);

    ctx.fillStyle='#9fb4ff'; ctx.font='12px system-ui';
    ctx.fillText('Accuracy %', 6, P.t+10);
    ctx.fillText('Attempts ‚Üí', P.l+W-90, P.t+H+20);

    if(hist.length===0){ ctx.fillText('No history', P.l+10, P.t+20); return; }

    // Bars
    const n = hist.length;
    const barW = Math.max(14, Math.min(28, W/(n*1.6)));
    const gap = (W - n*barW) / Math.max(1,(n-1));

    // grid
    ctx.strokeStyle='rgba(88,123,255,.18)'; ctx.setLineDash([4,4]);
    for(let gy=0; gy<=5; gy++){
      const y = P.t + H - (gy/5)*H;
      ctx.beginPath(); ctx.moveTo(P.l,y); ctx.lineTo(P.l+W,y); ctx.stroke();
      ctx.fillStyle='#88a2ff'; ctx.fillText((gy*20), 8, y+4);
    }
    ctx.setLineDash([]);

    hist.forEach((h,i)=>{
      const x = P.l + i*(barW+gap);
      const hgt = (h.accuracy/100)*H;
      // gradient bar
      const g = ctx.createLinearGradient(0,P.t+H-hgt,0,P.t+H);
      g.addColorStop(0,'#f59e0b'); g.addColorStop(1,'#a16207');
      ctx.fillStyle = g;
      ctx.fillRect(x, P.t + H - hgt, barW, hgt);
      // value label
      ctx.fillStyle='#dbe7ff';
      ctx.fillText(String(h.accuracy)+'%', x, P.t + H - hgt - 4);
    });

    // simple tooltip on tap
    cv.onclick = (e)=>{
      const rect = cv.getBoundingClientRect();
      const mx = e.clientX - rect.left, my = e.clientY - rect.top;
      // locate which bar
      for(let i=0;i<hist.length;i++){
        const x = P.l + i*(barW+gap);
        const hgt = (hist[i].accuracy/100)*H;
        const bx = x, by = P.t + H - hgt, bw = barW, bh = hgt;
        if(mx>=bx && mx<=bx+bw && my>=by && my<=by+bh){
          ctx.clearRect(0,0,cv.width,30);
          ctx.fillStyle='#0f1836'; ctx.fillRect(0,0,cv.width,30);
          ctx.fillStyle='#a7c1ff'; ctx.font='12px system-ui';
          ctx.fillText(`Attempt ${i+1} | Accuracy: ${hist[i].accuracy}%`, 12, 20);
          break;
        }
      }
    };
  }

  // Expose for buttons
  window.openHistory = openHistory;
  window.clearHistory = clearHistory;

  // ====== INIT ======
  renderQ(); recalc(); startTimer();

  // Disable pinch zoom / double-tap zoom
  document.addEventListener('touchstart', e=>{ if(e.touches.length>1) e.preventDefault(); }, {passive:false});
  document.addEventListener('gesturestart', e=>e.preventDefault());
})();
</script>
</body>
</html>
